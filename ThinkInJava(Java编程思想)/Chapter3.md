# Chapter 3 控制程序流程

## 3.1 使用Java运算符

加号(+)、减号和负号(-)、乘号(\*)、除号(/)以及等号(=)的用法与其他所有编程语言都是类似的。几乎所有运算符都只能操作“主类型”(Primitives)。唯一的例外是“=”、“==”和“!=”,它们能操作所有对象(也是对象易令人混淆的一个地方)。除此以外,String 类支持“+”和“+=”。

对主数据类型的赋值是值复制。为对象“赋值”的时候,真正操作的是它的句柄。所以倘若“从一个对象到另一个对象”赋值,实际就是将句柄从一个地方复制到另一个地方。这意味着假若为对象使用“C=D”,那么 C 和 D 最终都会指向最初只有 D 才指向的那个对象。

Java的基本算术运算符与其他大多数程序设计语言是相同的。其中包括加号(+)、减号(-)、除号(/)、乘号(\*)以及模数(%,从整数除法中获得余数)。

递减运算符是“--”,意为“减少一个单位”;递增运算符是“++”,意为“增加一个单位”。

关系运算符生成的是一个“布尔”(Boolean)结果。关系运算符包括小于(<)、大于(>)、小于或等于(<=)、大于或等于(>=)、等于(==)以及不等于(!=)。等于和不等于适用于所有内建的数据类型,但其他比较不适用于 boolean 类型。

==和!=比较的是对象句柄。

逻辑运算符 AND(&&)、OR(||)以及 NOT(!)能生成一个布尔值(true 或 false)——以自变量的逻辑关系为基础。

按位运算符：AND 运算符(&)，OR 运算符(|)，XOR(^,异或)，NOT(～,也叫作“非”运算符)。

左移位运算符(<<)能将运算符左边的运算对象向左移动运算符右侧指定的位数(在低位补 0)。“有符号”右移位运算符(>>)则将运算符左边的运算对象向右移动运算符右侧指定的位数。“有符号”右移位运算符使用了“符号扩展”:若值为正,则在高位插入 0;若值为负,则在高位插入 1。Java 也添加了一种“无符号”右移位运算符(>>>),它使用了“零扩展”:无论正负,都在高位插入 0。

三元运算符， 布尔表达式?值0:值1 。

字串运算符+，连接不同的字串。如果想通过“加号”连接字串(使用Java的早期版本),请务必保证第一个元素是字串(或加上引号的一系列字符,编译能将其识别成一个字串)。

强制类型转换：Java允许将任何主类型转换为其他任何一种主类型,但布尔值(bollean)要除外,后者根本不允许进行任何类型转换处理。“类”不允许进行类型转换。若进行“缩小转换”(Narrowing Conversion)的操作，必须明确声明出来。

十六进制(Base 16)——它适用于所有整数数据类型——用一个前置的0x或0X指示。并在后面跟随采用大写或小写形式的0-9以及a-f。

八进制(Base 8)是用数字中的一个前置 0 以及 0-7 的数位指示的。

字面值后的尾随字符标志着它的类型。若为大写或小写的 L,代表 long;大写或小写的 F,代表 float;大写或小写的 D,则代表 double。

指数采用记号方法，例如：1.39e-47f，e代表“10多少次幂”。

对主数据类型执行任何算术或按位运算,只要它们“比 int 小”(即 char,byte 或者short),那么在正式执行运算之前,那些值会自动转换成 int。这样一来,最终生成的值就是 int 类型。所以只要把一个值赋回较小的类型,就必须使用“造型”。此外,由于是将值赋回给较小的类型,所以可能出现信息丢失的情况)。通常,表达式中最大的数据类型是决定了表达式最终结果大小的那个类型。若将一个float 值与一个 double 值相乘,结果就是 double;如将一个 int 和一个 long 值相加,则结果为 long。

Java没有“sizeof”。所有数据类型在所有机器的大小都是相同的。Java 本身就是一种“与平台无关”的语言。


## 3.2 执行控制
在 Java里,涉及的关键字包括if-else、while、do-while、for以及switch选择语句。

```
if(布尔表达式)
  语句
  
或者

if(布尔表达式)
  语句
else
  语句

while(布尔表达式)
  语句

do
  语句
while(布尔表达式)

for(初始表达式; 布尔表达式; 步进)
  语句


```

在任何循环语句的主体部分,亦可用 break 和 continue 控制循环的流程。其中,break 用于强行退出循环,不执行循环中剩余的语句。而 continue 则停止执行当前的反复,然后退回循环起始和,开始新的反复。

尽管 goto 仍是 Java 的一个保留字,但并未在语言中得到正式使用;Java 没有 goto。

对 Java 来说,唯一用到标签的地方是在循环语句之前。进一步说,它实际需要紧靠在循环语句的前方——在标签和循环之间置入任何语句都是不明智的。而在循环之前设置标签的唯一理由是:我们希望在其中嵌套另一个循环或者一个开关。这是由于 break 和 continue 关键字通常只中断当前循环,但若随同标签使用,它们就会中断到存在标签的地方。
```
label1:
外部循环{
  内部循环{
    //...
    break; //1
    //...
    continue; //2
    //...
    continue label1; //3
    //...
    break label1; //4
  }
}
```
在条件 1 中,break中断内部循环。在条件 2 中,continue 移回内部循环的起始处。但在条件 3 中,continue label1 却同时中断内部循环以及外部循环,并移至 label1 处。随后,它实际是继续循环,但却从外部循环开始。在条件 4 中,break label1 也会中断所有循环,并回到 label1 处,但并不重新进入循环。也就是说,它实际是完全中止了两个循环。

break 本身只能中断最内层的循环(对于 continue 同样如此)。

```
switch(整数选择因子) {
  case 整数值 1 : 语句; break;
  case 整数值 2 : 语句; break;
  case 整数值 3 : 语句; break;
  case 整数值 4 : 语句; break;
  case 整数值 5 : 语句; break;
  //..
  default:语句;
}

```





































